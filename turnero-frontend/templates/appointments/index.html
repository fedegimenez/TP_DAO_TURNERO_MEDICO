{% extends "base.html" %}
{% block header %}Turnos{% endblock %}

{% block content %}
<div class="grid lg:grid-cols-3 gap-6">
  <div class="lg:col-span-1 space-y-4">
    <div id="appointment-form" hx-get="/turnos/_form" hx-trigger="load"></div>
    <div class="card">
      <h3 class="font-semibold text-slate-800 mb-2">Disponibilidad rápida</h3>
      <form class="space-y-3" hx-get="/turnos/_grid" hx-target="#availability-grid" hx-swap="innerHTML">
        <div>
          <label class="lbl">Médico</label>
          <select class="input" name="medico_id" required>
            <option value="" disabled selected>Seleccioná un profesional</option>
            {% for m in medicos %}
            <option value="{{ m.id }}">{{ m.apellido }}, {{ m.nombre }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="lbl">Fecha</label>
            <input type="date" class="input" name="fecha" required>
          </div>
          <div>
            <label class="lbl">Duración</label>
            <select class="input" name="duracion_min">
              <option value="20">20 min</option>
              <option value="30" selected>30 min</option>
              <option value="45">45 min</option>
              <option value="60">60 min</option>
            </select>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="lbl">Desde</label>
            <input type="time" class="input" name="inicio" value="08:00">
          </div>
          <div>
            <label class="lbl">Hasta</label>
            <input type="time" class="input" name="fin" value="17:00">
          </div>
        </div>
        <button class="btn-secondary w-full">Ver disponibilidad</button>
      </form>
    </div>
  </div>
  <div class="lg:col-span-2 space-y-4">
    <div id="availability-grid"></div>
    <div id="appointments-table"
         hx-get="/turnos/_table"
         hx-trigger="load">
    </div>
  </div>
</div>

<div id="modal" class="hidden fixed inset-0 bg-black/30 z-50 items-center justify-center p-4">
  <div class="bg-white rounded-2xl shadow-xl w-full max-w-2xl p-6">
    <div id="modal-body"></div>
    <div class="mt-4 text-right">
      <button class="btn" onclick="closeModal()">Cerrar</button>
    </div>
  </div>
</div>
{% endblock %}
